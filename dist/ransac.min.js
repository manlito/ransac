function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ransac=t()}(this,function(){"use strict";var e=function(){function e(t){_classCallCheck(this,e),this.problem=t}return _createClass(e,[{key:"sample",value:function t(e){for(var t=[],r=0;e>r;){var i=Math.floor(Math.random()*this.problem.data.length);-1===t.indexOf(this.problem.data[i])&&(t.push(this.problem.data[i]),++r)}return t}},{key:"modelError",value:function(e){var t=this.problem,r=t.data.reduce(function(r,i){var n=t.fit(e,i);return r+Math.pow(n,2)},0);return r}},{key:"classifyInliers",value:function(e,t,r){var i=[],n=[],o=this.problem;return o.data.forEach(function(a){-1===t.indexOf(a)&&(o.fit(e,a)<=r.threshold?i.push(a):n.push(a))}),{inliers:i,outliers:n}}},{key:"estimate",value:function(e){e=e||{},e.sampleSize=e.sampleSize||2,e.threshold=e.threshold||.1,e.maxIterations=e.maxIterations||30,e.inliersRatio=e.inliersRatio||.7,"undefined"==typeof e.improveModelWithConcensusSet&&(e.improveModelWithConcensusSet=!0);for(var t=0,r={error:1/0,model:{},inliers:[],outliers:[],status:"Failed"};t<e.maxIterations;){var i=this.sample(e.sampleSize),n=this.problem.model(i),o=this.classifyInliers(n,i,e),a=o.inliers,s=o.outliers,l=a.length/parseFloat(this.problem.data.length);if(l>=e.inliersRatio){var u=n;e.improveModelWithConcensusSet&&(u=this.problem.model(a.concat(i)));var c=this.modelError(u);c<r.error&&(r={inliers:a,outliers:s,model:u,error:c,status:"Success"})}++t}return r}}]),e}(),t=e;return t});
//# sourceMappingURL=ransac.min.js.map
